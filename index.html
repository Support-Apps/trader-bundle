<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>×”××¨× ×§ ×©×œ×™ ğŸ’°</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        :root {
            --pink: #FFD6E0;
            --pink-dark: #FFB6C8;
            --mint: #B8E8D0;
            --mint-dark: #8DD4B8;
            --gold: #D4AF37;
            --gold-light: #F0D060;
            --white: #FFFAF5;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Arial, sans-serif;
            background: var(--pink);
            min-height: 100vh;
            padding: 20px;
        }
        
        .bsd {
            text-align: left;
            font-size: 16px;
            color: var(--gold);
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .header-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .current-date {
            font-size: 14px;
            color: #666;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
            position: relative;
        }
        
        h1 {
            text-align: center;
            color: var(--gold);
            font-size: 42px;
            margin-bottom: 25px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }
        
        .wallet {
            background: var(--white);
            border-radius: 25px;
            padding: 30px;
            box-shadow: 0 10px 40px rgba(212, 175, 55, 0.3);
            border: 3px solid var(--gold);
            margin-bottom: 30px;
        }
        
        .balances-row {
            display: flex;
            gap: 15px;
            margin-bottom: 25px;
            justify-content: center;
        }
        
        .balance-box {
            flex: 1;
            min-width: 100px;
            height: 100px;
            text-align: center;
            padding: 12px 8px;
            border-radius: 20px;
            border: 2px solid var(--gold);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }
        
        .balance-box.wallet-balance {
            background: var(--pink);
        }
        
        .balance-box.savings-balance {
            background: var(--mint);
        }
        
        .balance-box.bank-balance {
            background: #e0e0e0;
        }
        
        .balance-label {
            font-size: 14px;
            color: #666;
            margin-bottom: 5px;
        }
        
        .balance-amount {
            font-size: 24px;
            font-weight: bold;
            color: var(--gold);
        }
        
        .wallet-contents {
            background: var(--mint);
            border-radius: 15px;
            padding: 20px;
            min-height: 100px;
            border: 2px dashed var(--mint-dark);
            margin-bottom: 20px;
        }
        
        .wallet-contents-title {
            text-align: center;
            color: #555;
            margin-bottom: 15px;
            font-size: 18px;
        }
        
        .money-in-wallet {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
            align-items: center;
        }
        
        .money-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
        }
        
        .money-count {
            font-size: 14px;
            font-weight: bold;
            color: #555;
            background: white;
            padding: 2px 10px;
            border-radius: 10px;
        }
        
        .money-time {
            font-size: 11px;
            color: #888;
            direction: ltr;
        }
        
        .empty-wallet {
            text-align: center;
            color: #888;
            font-style: italic;
            padding: 30px;
        }
        
        .deposit-section {
            background: var(--white);
            border-radius: 20px;
            padding: 25px;
            border: 2px solid var(--pink-dark);
        }
        
        .section-title {
            text-align: center;
            color: var(--gold);
            font-size: 24px;
            margin-bottom: 20px;
        }
        
        .subsection-title {
            text-align: center;
            font-size: 18px;
            color: #666;
            margin: 15px 0 10px 0;
        }
        
        .money-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            justify-content: center;
        }
        
        .money-btn {
            padding: 12px 20px;
            font-size: 16px;
            font-weight: bold;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .money-btn:hover {
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .money-btn:active {
            opacity: 0.8;
        }
        
        .coin-btn {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            padding: 0;
            justify-content: center;
            background: radial-gradient(circle at 30% 30%, #f0f0f0, #a0a0a0);
            color: #404040;
            border: 3px solid #808080;
            box-shadow: 2px 2px 5px rgba(0,0,0,0.3), inset -2px -2px 5px rgba(0,0,0,0.1);
        }
        
        .coin-btn.gold {
            width: 60px;
            height: 60px;
            background: radial-gradient(circle at 50% 50%, #ffe070 0%, #c09020 55%, #a0a0a0 56%, #c0c0c0 80%, #909090 100%);
            color: #5a4010;
            border: 3px solid #808080;
            box-shadow: 2px 2px 5px rgba(0,0,0,0.3), inset -2px -2px 5px rgba(0,0,0,0.1);
        }
        .bill-btn-20 { background: #c03030; color: white; border: 2px solid #a02020; }
        .bill-btn-50 { background: #308050; color: white; border: 2px solid #206040; }
        .bill-btn-100 { background: #c07020; color: white; border: 2px solid #a05010; }
        .bill-btn-200 { background: #3060a0; color: white; border: 2px solid #204080; }
        
        .actions {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 25px;
            flex-wrap: wrap;
        }
        
        .action-btn {
            padding: 15px 30px;
            font-size: 16px;
            font-weight: bold;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .action-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
        }
        
        .bank-btn { background: linear-gradient(135deg, var(--gold-light), var(--gold)); color: #5a4010; border: 2px solid var(--gold); }
        .savings-btn { background: var(--mint); color: #2d5a40; border: 2px solid var(--mint-dark); }
        .reset-btn { background: var(--pink); color: #8b4050; border: 2px solid var(--pink-dark); }
        
        .history-section {
            background: var(--white);
            border-radius: 20px;
            padding: 25px;
            border: 3px solid var(--gold);
            max-height: 300px;
            overflow-y: auto;
        }
        
        .history-item {
            padding: 12px 15px;
            border-radius: 10px;
            margin-bottom: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .history-deposit { background: #e8f8e8; border-right: 4px solid var(--mint-dark); }
        .history-withdraw { background: #ffe8e8; border-right: 4px solid var(--pink-dark); }
        .history-savings { background: #fff8e0; border-right: 4px solid var(--gold); }
        .history-bank { background: #e8e8f0; border-right: 4px solid #8080a0; }
        
        .history-text { font-size: 14px; }
        .history-amount { font-weight: bold; font-size: 18px; }
        .history-time { color: #888; font-size: 12px; }
        
        .no-history {
            text-align: center;
            color: #888;
            font-style: italic;
            padding: 20px;
        }
        
        /* Modal */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 100;
            justify-content: center;
            align-items: center;
        }
        
        .modal {
            background: var(--white);
            border-radius: 25px;
            padding: 30px;
            max-width: 450px;
            width: 90%;
            border: 3px solid var(--gold);
            max-height: 90vh;
            overflow-y: auto;
        }
        
        .modal-title {
            text-align: center;
            color: var(--gold);
            font-size: 24px;
            margin-bottom: 20px;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-label {
            display: block;
            margin-bottom: 5px;
            color: #555;
            font-weight: bold;
        }
        
        .form-input, .form-select {
            width: 100%;
            padding: 12px;
            font-size: 16px;
            border: 2px solid var(--mint-dark);
            border-radius: 10px;
            background: white;
        }
        
        .form-input:focus, .form-select:focus {
            outline: none;
            border-color: var(--gold);
        }
        
        .modal-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 20px;
        }
        
        .modal-btn {
            padding: 12px 30px;
            font-size: 16px;
            font-weight: bold;
            border: none;
            border-radius: 20px;
            cursor: pointer;
        }
        
        .modal-confirm { background: var(--mint); color: #2d5a40; border: 2px solid var(--mint-dark); }
        .modal-cancel { background: var(--pink); color: #8b4050; border: 2px solid var(--pink-dark); }
        
        .error-message {
            color: #c03030;
            text-align: center;
            margin-top: 10px;
            font-size: 14px;
        }
        
        .success-message {
            color: #308050;
            text-align: center;
            padding: 20px;
            font-size: 18px;
        }
        
        .bank-details-display {
            background: #f5f5f5;
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
            font-size: 14px;
        }
        
        .bank-details-display p {
            margin: 5px 0;
        }
        
        @keyframes deposit-animation {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        .depositing { animation: deposit-animation 0.3s ease; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header-row">
            <div class="bsd">×‘×¡"×“</div>
            <div class="current-date" id="currentDate"></div>
        </div>
        <h1>ğŸ’° ×”××¨× ×§ ×©×œ×™ ğŸ’°</h1>
        
        <div class="wallet">
            <div class="balances-row">
                <div class="balance-box wallet-balance">
                    <div class="balance-label">ğŸ’µ ×‘××¨× ×§</div>
                    <div class="balance-amount" id="walletBalance">â‚ª0</div>
                </div>
                <div class="balance-box savings-balance">
                    <div class="balance-label">ğŸ· ×‘×—×™×¡×›×•×Ÿ</div>
                    <div class="balance-amount" id="savingsBalance">â‚ª0</div>
                </div>
                <div class="balance-box bank-balance">
                    <div class="balance-label">ğŸ¦ ×‘×‘× ×§</div>
                    <div class="balance-amount" id="bankBalance">â‚ª0</div>
                </div>
            </div>
            
            <div class="wallet-contents">
                <div class="wallet-contents-title">ğŸ’µ ××” ×™×© ×‘××¨× ×§:</div>
                <div class="money-in-wallet" id="walletContents">
                    <div class="empty-wallet">×”××¨× ×§ ×¨×™×§ ğŸ™</div>
                </div>
            </div>
            
            <div class="deposit-section">
                <div class="section-title">âœ¨ ×”×¤×§×“×ª ×›×¡×£</div>
                
                <div class="subsection-title">ğŸª™ ××˜×‘×¢×•×ª</div>
                <div class="money-buttons" style="margin-bottom: 15px;">
                    <button class="money-btn coin-btn" onclick="deposit(1)">â‚ª1</button>
                    <button class="money-btn coin-btn" onclick="deposit(2)">â‚ª2</button>
                    <button class="money-btn coin-btn" onclick="deposit(5)">â‚ª5</button>
                    <button class="money-btn coin-btn gold" onclick="deposit(10)">â‚ª10</button>
                </div>
                
                <div class="subsection-title">ğŸ’µ ×©×˜×¨×•×ª</div>
                <div class="money-buttons">
                    <button class="money-btn bill-btn-20" onclick="deposit(20)">â‚ª20</button>
                    <button class="money-btn bill-btn-50" onclick="deposit(50)">â‚ª50</button>
                    <button class="money-btn bill-btn-100" onclick="deposit(100)">â‚ª100</button>
                    <button class="money-btn bill-btn-200" onclick="deposit(200)">â‚ª200</button>
                </div>
                
                <div class="subsection-title">ğŸ¤– ×”×¤×§×“×” ××•×˜×•××˜×™×ª</div>
                <div style="display: flex; gap: 10px; align-items: center; justify-content: center; flex-wrap: wrap;">
                    <select id="autoAmount" style="padding: 10px; font-size: 16px; border-radius: 10px; border: 2px solid var(--gold);">
                        <option value="1">××˜×‘×¢ â‚ª1</option>
                        <option value="2">××˜×‘×¢ â‚ª2</option>
                        <option value="5">××˜×‘×¢ â‚ª5</option>
                        <option value="10">××˜×‘×¢ â‚ª10</option>
                        <option value="20">×©×˜×¨ â‚ª20</option>
                        <option value="50">×©×˜×¨ â‚ª50</option>
                        <option value="100" selected>×©×˜×¨ â‚ª100</option>
                        <option value="200">×©×˜×¨ â‚ª200</option>
                    </select>
                    <button id="autoBtn" class="action-btn" style="background: #4CAF50; color: white; border: 2px solid #388E3C;" onclick="toggleAutoDeposit()">â–¶ï¸ ×”×ª×—×œ</button>
                </div>
            </div>
            
            <div class="actions">
                <button class="action-btn bank-btn" onclick="openBankModal()">ğŸ¦ ×”×¢×‘×¨×” ×œ×—×©×‘×•×Ÿ ×”×‘× ×§</button>
                <button class="action-btn savings-btn" onclick="openSavingsModal()">ğŸ· ×”×¢×‘×¨×” ×œ×—×™×¡×›×•×Ÿ</button>
                <button class="action-btn" style="background: #f0f0f0; color: #333; border: 2px solid #ccc;" onclick="printStatement()">ğŸ–¨ï¸ ×”×“×¤×¡×ª ×ª×“×¤×™×¡</button>
                <button class="action-btn" style="background: #25D366; color: white; border: 2px solid #128C7E;" onclick="shareStatement()">ğŸ“¤ ×©×™×ª×•×£</button>
            </div>
        </div>
        
        <div class="history-section">
            <div class="section-title">ğŸ“œ ×ª× ×•×¢×•×ª</div>
            <div id="history">
                <div class="no-history">××™×Ÿ ×¢×“×™×™×Ÿ ×¤×¢×•×œ×•×ª</div>
            </div>
        </div>
    </div>
    
    <!-- Bank Transfer Modal -->
    <div class="modal-overlay" id="bankModal">
        <div class="modal">
            <div class="modal-title">ğŸ¦ ×”×¢×‘×¨×” ×œ×—×©×‘×•×Ÿ ×”×‘× ×§</div>
            
            <div id="bankFormSection">
                <div class="form-group">
                    <label class="form-label">×¡×›×•× ×œ×”×¢×‘×¨×”:</label>
                    <input type="number" class="form-input" id="bankAmount" placeholder="×”×–×™× ×™ ×¡×›×•×" min="1">
                </div>
                
                <div class="form-group">
                    <label class="form-label">×‘×—×¨×™ ×‘× ×§:</label>
                    <select class="form-select" id="bankSelect" onchange="updateBranches()">
                        <option value="">-- ×‘×—×¨×™ ×‘× ×§ --</option>
                        <option value="12">×‘× ×§ ×”×¤×•×¢×œ×™× (12)</option>
                        <option value="10">×‘× ×§ ×œ××•××™ (10)</option>
                        <option value="11">×‘× ×§ ×“×™×¡×§×•× ×˜ (11)</option>
                        <option value="20">×‘× ×§ ××–×¨×—×™ ×˜×¤×—×•×ª (20)</option>
                        <option value="31">×‘× ×§ ×”×‘×™× ×œ××•××™ (31)</option>
                        <option value="14">×‘× ×§ ××•×¦×¨ ×”×—×™×™×œ (14)</option>
                        <option value="17">×‘× ×§ ××¨×›× ×ª×™×œ (17)</option>
                        <option value="04">×‘× ×§ ×™×”×‘ (04)</option>
                        <option value="09">×‘× ×§ ×”×“×•××¨ (09)</option>
                        <option value="46">×‘× ×§ ××¡×“ (46)</option>
                        <option value="54">×‘× ×§ ×™×¨×•×©×œ×™× (54)</option>
                        <option value="26">×™×•×‘× ×§ (26)</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label">×¡× ×™×£:</label>
                    <select class="form-select" id="branchSelect">
                        <option value="">-- ×‘×—×¨×™ ×¡× ×™×£ --</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label">××¡×¤×¨ ×—×©×‘×•×Ÿ:</label>
                    <input type="text" class="form-input" id="accountNumber" placeholder="×”×–×™× ×™ ××¡×¤×¨ ×—×©×‘×•×Ÿ" maxlength="9">
                </div>
                
                <div class="form-group">
                    <label class="form-label">×©× ×‘×¢×œ/×ª ×”×—×©×‘×•×Ÿ:</label>
                    <input type="text" class="form-input" id="accountName" placeholder="×”×–×™× ×™ ×©×">
                </div>
                
                <div class="error-message" id="bankError"></div>
                
                <div class="modal-buttons">
                    <button class="modal-btn modal-confirm" onclick="confirmBankTransfer()">×‘×¦×¢×™ ×”×¢×‘×¨×”</button>
                    <button class="modal-btn modal-cancel" onclick="closeBankModal()">×‘×™×˜×•×œ</button>
                </div>
            </div>
            
            <div id="bankSuccessSection" style="display: none;">
                <div class="success-message">âœ… ×”×”×¢×‘×¨×” ×‘×•×¦×¢×” ×‘×”×¦×œ×—×”!</div>
                <div class="bank-details-display" id="transferDetails"></div>
                <div class="modal-buttons">
                    <button class="modal-btn modal-confirm" onclick="closeBankModal()">×¡×’×•×¨</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Savings Modal -->
    <div class="modal-overlay" id="savingsModal">
        <div class="modal">
            <div class="modal-title">ğŸ· ×”×¢×‘×¨×” ×œ×—×™×¡×›×•×Ÿ</div>
            <p style="text-align: center; color: #666; margin-bottom: 15px;">×”×¢×‘×¨×” ××—×©×‘×•×Ÿ ×”×‘× ×§ ×œ×—×™×¡×›×•×Ÿ</p>
            <div class="form-group">
                <label class="form-label">×¡×›×•× ×œ×”×¢×‘×¨×”:</label>
                <input type="number" class="form-input" id="savingsAmount" placeholder="×›××” ×œ×”×¢×‘×™×¨?" min="1">
            </div>
            <div class="error-message" id="savingsError"></div>
            <div class="modal-buttons">
                <button class="modal-btn modal-confirm" onclick="confirmSavings()">×”×¢×‘×™×¨×™ ×œ×—×™×¡×›×•×Ÿ</button>
                <button class="modal-btn modal-cancel" onclick="closeSavingsModal()">×‘×™×˜×•×œ</button>
            </div>
        </div>
    </div>
    
    <script>
        // === RESET FUNCTION FIRST - ×—×™×™×‘ ×œ×”×™×•×ª ×¨××©×•×Ÿ! ===
        var mizrahiLogo = '<svg xmlns="http://www.w3.org/2000/svg" width="150" height="60" viewBox="-1.5 316.672 615 233"><path fill="#4D555A" d="M436.739 420.477c2.151-14.98-5.767-32.193-18.834-43.448-19.637-16.93-54.945-24.647-89.094-3.796-1.759 1.076-3.452 1.229-4.284.736-1.31-.774-1.108-2.697-.1-3.944 7.258-9.003 36.935-48.912 79.311-48.912 28.157 0 54.664 19.727 62.252 48.008 1.989 7.411 2.917 13.607 2.965 18.924 0 0-4.002 18.059-24.91 28.969a102.682 102.682 0 0 1-7.306 3.463"/><path fill="#F5821F" d="M286.24 342.996c10.002 9.036 63.982 56.6 70.494 62.342 35.133 30.983 67.281 22.123 87.306 11.672 20.908-10.906 24.92-28.97 24.91-28.97.091 5.996.976 42.572-35.108 66.378-23.615 15.592-64.676 27.794-110.447-11.972-9.132-7.938-67.344-57.877-73.851-63.62-35.138-30.978-69.405-20.392-89.596-2.807-5.934 5.168-13.551 14.066-16.663 21.999.206-3.682-.521-24.293 20.646-49.371 10.141-12.011 29.878-30.586 63.137-30.586 19.305.005 36.675 4.586 59.172 24.935"/><path fill="#4D555A" d="M145.79 423.407a69.74 69.74 0 0 1-2.491-25.441c3.137-7.908 10.724-16.792 16.648-21.941a72.276 72.276 0 0 1 15.539-10.385c-3.457 15.664 4.608 32.866 18.389 44.738 19.655 16.931 53.688 24.686 87.831 3.835 1.76-1.076 3.543-1.358 4.284-.736 1.2 1.008 1.157 2.572.11 3.944-7.005 9.204-36.065 49.165-78.456 49.165-28.152 0-53.755-15.032-61.854-43.179m-37.891 70.471c-.727 6.904-5.192 48.769-5.556 50.834-.402 2.252-2.362 3.29-4.365 3.29H85.465l5.752-50.089h-7.646a3.298 3.298 0 0 1-3.251-3.773c.253-2.214 2.472-4.164 4.681-4.164h18.518c3.591.005 4.619 1.554 4.38 3.902m137.972 25.116c1.95-15.74-9.759-29.013-28.1-29.013H200.99c-4.557 0-8.984 1.176-9.63 5.856l-2.582 22.242c0 .139.139 1.301.521 1.822.784 1.052 1.568 1.435 2.735 1.435h15.491c2.079 0 4.164-1.827 4.418-3.897.268-2.605-.784-3.509-2.214-3.509h-4.423l1.659-16.137h9.113c9.366 0 14.443 10.542 13.139 21.597-1.43 11.059-9.099 21.075-17.949 21.075h-21.73c-2.09 0-4.164 1.956-4.557 4.041-.129 1.955 1.176 3.504 3.122 3.504h22.113c17.835-.004 33.833-13.143 35.655-29.016m-65.966-10.663c-1.109 10.218-2.854 27.55-3.945 36.123-.263 2.586-1.478 3.552-3.619 3.552H159c.774-6.244 2.706-25.498 4.012-34.735 1.559-11.58-3.901-15.353-13.277-15.353h-10.06l-5.552 50.088h-16.356l5.814-50.088H118.9c-1.95 0-3.38-1.951-3.117-3.901.259-2.214 2.343-4.036 4.418-4.036h38.518c19.517-.001 22.361 7.679 21.186 18.35m-104.864 0c-1.147 10.476-2.959 28.358-3.987 36.658-.282 2.28-1.778 3.017-3.299 3.017H54.306c.783-6.244 2.581-25.498 3.882-34.735 1.821-12.623-5.341-15.353-13.268-15.353H34.726l-5.297 48.793c-.13 1.295-.521 1.295-.914 1.295H3.28c-1.821 0-3.504-1.95-3.251-4.03.263-1.955 2.214-3.644 4.557-3.644h9.127l4.882-42.414h-4.518c-1.951 0-3.386-1.951-3.118-3.901.254-2.214 2.343-4.035 4.547-4.035h38.389c19.645-.001 22.442 7.678 21.146 18.349m220.636 16.366l2.897-26.779h-7.545a3.379 3.379 0 0 1-3.332-3.772c.21-2.214 2.381-4.165 4.59-4.165h18.909c3.424 0 4.236 1.755 4.089 3.897-.229 3.37-2.778 27.043-2.778 27.043-1.349 15.228-9.979 29.064-35.171 27.19-14.941-1.1-25.642-12.097-24.418-27.19l1.086-9.821 2.161-21.123s3.423.009 5.938 0c6.636 0 11.398 3.504 10.771 10.274l-2.696 24.045c-.736 8.071 5.278 14.836 13.469 14.836 7.412.005 11.285-7.157 12.03-14.435m316.069-4.666c1.951-15.874-7.416-30.05-33.048-30.05h-31.743c-2.084 0-4.279 1.496-4.557 3.705-.301 2.405 1.057 4.231 3.252 4.231h5.082l-5.838 50.088h17.231s5.432-50.088 5.565-50.088h11.365c8.592 0 17.17 7.497 15.654 21.339-1.568 13.139-2.716 20.311-15.463 20.956l-2.864.268c-1.3 0-3.782 1.301-4.04 3.896a3.213 3.213 0 0 0 2.821 3.639l3.38.01c24.196 0 31.257-11.465 33.203-27.994m-85.517-22.113s-4.968 45.861-5.092 46.68c-.363 2.252-2.104 3.408-4.098 3.408h-12.775l5.833-50.088h-5.853c-1.955 0-3.39-1.951-3.122-4.04.254-2.08 2.338-3.896 4.418-3.896h27.454c1.96 0 3.39 1.559 3.127 3.514-.268 2.08-2.477 4.423-4.557 4.423h-5.335m-30.686 10.542c-1.033 10.083-2.745 27.104-4.084 35.635-.425 2.768-2.275 3.906-4.413 3.906h-12.837c2.328-18.887 2.979-24.839 3.925-34.607 1.086-11.088-3.107-15.734-12.866-15.734-5.718-.135-14.568 0-14.568 0a3.056 3.056 0 0 1-3.017-3.515c.248-2.214 2.313-4.164 4.394-4.164h21.73c19.517-.001 22.826 7.807 21.736 18.479m-53.407-.13a2474.115 2474.115 0 0 1-4.355 36.123c-.268 2.586-1.478 3.552-3.619 3.552h-13.746c.77-6.244 3.112-25.498 4.418-34.735 1.559-11.58-3.901-15.353-13.269-15.353h-10.193l-5.422 50.088h-16.53l5.738-50.088h-4.442c-1.945 0-3.38-1.951-3.117-3.901.263-2.214 2.348-4.035 4.428-4.035h38.513c19.517-.001 22.773 7.678 21.596 18.349m-71.121-14.453c-.373 3.188-2.396 23.743-2.777 26.627-.315 2.338-2.415 3.146-4.395 3.146h-11.197l2.888-25.737h-8.846a3.294 3.294 0 0 1-3.256-3.773c.259-2.214 2.472-4.164 4.681-4.164h18.575c2.969.003 4.599 1.615 4.327 3.901"/></svg>';
        
        var autoDepositInterval = null;
        var autoDepositAmount = null;
        
        function toggleAutoDeposit() {
            var btn = document.getElementById('autoBtn');
            
            if (autoDepositInterval) {
                // ×¢×¦×•×¨
                clearInterval(autoDepositInterval);
                autoDepositInterval = null;
                btn.textContent = 'â–¶ï¸ ×”×ª×—×œ';
                btn.style.background = '#4CAF50';
            } else {
                // ×”×ª×—×œ
                autoDepositAmount = parseInt(document.getElementById('autoAmount').value);
                btn.textContent = 'â¹ï¸ ×¢×¦×•×¨';
                btn.style.background = '#f44336';
                
                // ×”×¤×§×“×” ×¨××©×•× ×” ××™×“
                deposit(autoDepositAmount);
                
                // ×”×¤×§×“×” ×›×œ 100 ××™×œ×™×©× ×™×•×ª (××”×™×¨ ×™×•×ª×¨)
                autoDepositInterval = setInterval(function() {
                    deposit(autoDepositAmount);
                }, 100);
            }
        }
        
        function printStatement() {
            var now = new Date();
            var dateStr = now.toLocaleString('he-IL', { 
                timeZone: 'Asia/Jerusalem',
                day: '2-digit', 
                month: '2-digit',
                year: 'numeric',
                hour: '2-digit', 
                minute: '2-digit'
            });
            
            var historyHtml = '';
            if (state.history && state.history.length > 0) {
                for (var i = 0; i < state.history.length; i++) {
                    var item = state.history[i];
                    historyHtml += '<tr>' +
                        '<td style="padding: 8px; border-bottom: 1px solid #eee;">' + item.time + '</td>' +
                        '<td style="padding: 8px; border-bottom: 1px solid #eee;">' + item.text + '</td>' +
                        '<td style="padding: 8px; border-bottom: 1px solid #eee; text-align: left;">â‚ª' + formatNumber(item.amount) + '</td>' +
                    '</tr>';
                }
            } else {
                historyHtml = '<tr><td colspan="3" style="padding: 20px; text-align: center; color: #888;">××™×Ÿ ×ª× ×•×¢×•×ª</td></tr>';
            }
            
            // ×™×¦×™×¨×ª div ×œ×”×“×¤×¡×”
            var printDiv = document.createElement('div');
            printDiv.id = 'printArea';
            printDiv.innerHTML = 
                '<div style="font-family: Arial, sans-serif; padding: 20px; max-width: 600px; margin: 0 auto; direction: rtl;">' +
                '<div style="text-align: center; margin-bottom: 20px;">' +
                    '<div style="margin-bottom: 10px;">' + mizrahiLogo + '</div>' +
                '</div>' +
                '<h2 style="text-align: center; color: #333; border-bottom: 2px solid #f60; padding-bottom: 10px;">×ª×“×¤×™×¡ ×ª× ×•×¢×•×ª ×—×©×‘×•×Ÿ</h2>' +
                '<div style="margin: 20px 0; padding: 15px; background: #f9f9f9; border-radius: 10px;">' +
                    '<p><strong>×ª××¨×™×š ×”×¤×§×”:</strong> ' + dateStr + '</p>' +
                    '<p><strong>×™×ª×¨×” ×‘××¨× ×§:</strong> â‚ª' + formatNumber(getWalletBalance()) + '</p>' +
                    '<p><strong>×™×ª×¨×” ×‘×—×™×¡×›×•×Ÿ:</strong> â‚ª' + formatNumber(state.savings) + '</p>' +
                    '<p><strong>×™×ª×¨×” ×‘×‘× ×§:</strong> â‚ª' + formatNumber(state.bank) + '</p>' +
                '</div>' +
                '<h3 style="color: #f60;">×ª× ×•×¢×•×ª ××—×¨×•× ×•×ª:</h3>' +
                '<table style="width: 100%; border-collapse: collapse;">' +
                    '<thead><tr style="background: #f60; color: white;">' +
                        '<th style="padding: 10px; text-align: right;">×ª××¨×™×š</th>' +
                        '<th style="padding: 10px; text-align: right;">×¤×¢×•×œ×”</th>' +
                        '<th style="padding: 10px; text-align: left;">×¡×›×•×</th>' +
                    '</tr></thead>' +
                    '<tbody>' + historyHtml + '</tbody>' +
                '</table>' +
                '<p style="text-align: center; margin-top: 30px; color: #888; font-size: 12px;">×ª×“×¤×™×¡ ×–×” ×”×•×¤×§ ×××¤×œ×™×§×¦×™×™×ª ×”××¨× ×§ ×”×“×™×’×™×˜×œ×™</p>' +
                '</div>';
            
            // ×”×¦×’×ª ×”×ª×“×¤×™×¡ ×‘××•×“××œ
            var modal = document.createElement('div');
            modal.style.cssText = 'position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: white; z-index: 9999; overflow: auto; padding: 10px;';
            
            var closeBtn = document.createElement('button');
            closeBtn.textContent = 'âœ• ×¡×’×•×¨';
            closeBtn.style.cssText = 'position: fixed; top: 10px; left: 10px; padding: 10px 20px; background: #f60; color: white; border: none; border-radius: 10px; font-size: 16px; cursor: pointer; z-index: 10000;';
            closeBtn.onclick = function() { document.body.removeChild(modal); };
            
            modal.appendChild(closeBtn);
            modal.appendChild(printDiv);
            document.body.appendChild(modal);
            
            alert('×”×ª×“×¤×™×¡ ××•×¦×’! ×œ×©××™×¨×”: ×¦×™×œ×•× ××¡×š ××• ×©×™×ª×•×£ ğŸ“¸');
        }
        
        function shareStatement() {
            var now = new Date();
            var dateStr = now.toLocaleString('he-IL', { 
                timeZone: 'Asia/Jerusalem',
                day: '2-digit', 
                month: '2-digit',
                year: 'numeric',
                hour: '2-digit', 
                minute: '2-digit'
            });
            
            var text = 'ğŸ“Š ×ª×“×¤×™×¡ ×—×©×‘×•×Ÿ - ×‘× ×§ ××–×¨×—×™ ×˜×¤×—×•×ª\n' +
                'ğŸ“… ' + dateStr + '\n\n' +
                'ğŸ’µ ×™×ª×¨×” ×‘××¨× ×§: â‚ª' + formatNumber(getWalletBalance()) + '\n' +
                'ğŸ· ×™×ª×¨×” ×‘×—×™×¡×›×•×Ÿ: â‚ª' + formatNumber(state.savings) + '\n' +
                'ğŸ¦ ×™×ª×¨×” ×‘×‘× ×§: â‚ª' + formatNumber(state.bank) + '\n\n' +
                'ğŸ“œ ×ª× ×•×¢×•×ª ××—×¨×•× ×•×ª:\n';
            
            if (state.history && state.history.length > 0) {
                var limit = Math.min(state.history.length, 10);
                for (var i = 0; i < limit; i++) {
                    var item = state.history[i];
                    text += 'â€¢ ' + item.text + ' - â‚ª' + formatNumber(item.amount) + ' (' + item.time + ')\n';
                }
            } else {
                text += '××™×Ÿ ×ª× ×•×¢×•×ª';
            }
            
            if (navigator.share) {
                navigator.share({
                    title: '×ª×“×¤×™×¡ ×—×©×‘×•×Ÿ',
                    text: text
                }).catch(function(err) {
                    console.log('Share error:', err);
                    copyToClipboard(text);
                });
            } else {
                copyToClipboard(text);
            }
        }
        
        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(function() {
                alert('×”×ª×“×¤×™×¡ ×”×•×¢×ª×§! × ×™×ª×Ÿ ×œ×”×“×‘×™×§ ×‘×•×•××˜×¡××¤ ××• ×‘×›×œ ××§×•× ××—×¨');
            }).catch(function() {
                alert('×œ× × ×™×ª×Ÿ ×œ×”×¢×ª×™×§. × ×¡×™ ×©×•×‘.');
            });
        }
        
        // × ×ª×•× ×™ ×¡× ×™×¤×™× ×œ×›×œ ×‘× ×§
        var branchesData = {
            '12': [ // ×¤×•×¢×œ×™×
                {num: '600', name: '×¡× ×™×£ ×¨××©×™ ×ª×œ ××‘×™×‘'},
                {num: '532', name: '×“×™×–× ×’×•×£ ×ª×œ ××‘×™×‘'},
                {num: '617', name: '×¨××ª ×’×Ÿ'},
                {num: '690', name: '×—×™×¤×” ××¨×›×–'},
                {num: '782', name: '×™×¨×•×©×œ×™× ××¨×›×–'},
                {num: '654', name: '×‘××¨ ×©×‘×¢'},
                {num: '718', name: '× ×ª× ×™×”'},
                {num: '567', name: '×¤×ª×— ×ª×§×•×•×”'},
                {num: '623', name: '×¨××©×•×Ÿ ×œ×¦×™×•×Ÿ'},
                {num: '701', name: '××©×“×•×“'}
            ],
            '10': [ // ×œ××•××™
                {num: '800', name: '×¡× ×™×£ ×¨××©×™ ×œ×•×“'},
                {num: '815', name: '×¨×•×˜×©×™×œ×“ ×ª×œ ××‘×™×‘'},
                {num: '862', name: '×¨××ª ×’×Ÿ'},
                {num: '901', name: '×—×™×¤×”'},
                {num: '850', name: '×™×¨×•×©×œ×™×'},
                {num: '910', name: '×‘××¨ ×©×‘×¢'},
                {num: '870', name: '× ×ª× ×™×”'},
                {num: '835', name: '×¤×ª×— ×ª×§×•×•×”'},
                {num: '842', name: '×¨××©×•×Ÿ ×œ×¦×™×•×Ÿ'},
                {num: '920', name: '××©×“×•×“'}
            ],
            '11': [ // ×“×™×¡×§×•× ×˜
                {num: '001', name: '×¡× ×™×£ ×¨××©×™ ×ª×œ ××‘×™×‘'},
                {num: '019', name: '××œ× ×‘×™ ×ª×œ ××‘×™×‘'},
                {num: '052', name: '×¨××ª ×’×Ÿ'},
                {num: '071', name: '×—×™×¤×”'},
                {num: '091', name: '×™×¨×•×©×œ×™×'},
                {num: '084', name: '×‘××¨ ×©×‘×¢'},
                {num: '067', name: '× ×ª× ×™×”'},
                {num: '048', name: '×¤×ª×— ×ª×§×•×•×”'},
                {num: '055', name: '×¨××©×•×Ÿ ×œ×¦×™×•×Ÿ'},
                {num: '088', name: '××©×“×•×“'}
            ],
            '20': [ // ××–×¨×—×™ ×˜×¤×—×•×ª
                {num: '416', name: '××©×“×•×“'},
                {num: '565', name: '××©×“×•×“ ×¡×™×˜×™'},
                {num: '615', name: '×.×ª. ××©×“×•×“'},
                {num: '409', name: '××¨×›×– ×¢×¡×§×™× ×ª×œ ××‘×™×‘'},
                {num: '469', name: '××œ× ×‘×™ ×ª×œ ××‘×™×‘'},
                {num: '453', name: '×œ×‘ ×“×™×–× ×’×•×£'},
                {num: '413', name: '×¨××ª ×’×Ÿ'},
                {num: '477', name: '×”××’×“×œ ×¨××ª ×’×Ÿ'},
                {num: '441', name: '×—×™×¤×” ×”×“×¨'},
                {num: '444', name: '××¨×›×– ×¢×¡×§×™× ×—×™×¤×”'},
                {num: '449', name: '×›×¨××œ ×—×™×¤×”'},
                {num: '401', name: '×§×¨×™×ª ×”×¢×¡×§×™× ×™×¨×•×©×œ×™×'},
                {num: '417', name: '××œ×›×™ ×™×©×¨××œ ×™×¨×•×©×œ×™×'},
                {num: '563', name: '×¨××•×ª ×™×¨×•×©×œ×™×'},
                {num: '426', name: '××¨×›×– ×¢×¡×§×™× ×‘××¨ ×©×‘×¢'},
                {num: '566', name: '××¦×“×” ×‘××¨ ×©×‘×¢'},
                {num: '452', name: '×§× ×™×•×Ÿ ×”×©×¨×•×Ÿ × ×ª× ×™×”'},
                {num: '465', name: '×œ×‘ ×”×¢×™×¨ ×¤×ª×— ×ª×§×•×•×”'},
                {num: '435', name: '×¨××©×•×Ÿ ×œ×¦×™×•×Ÿ'},
                {num: '427', name: '××©×§×œ×•×Ÿ'},
                {num: '521', name: '××•×“×™×¢×™×Ÿ'},
                {num: '415', name: '×”×¨×¦×œ×™×”'},
                {num: '468', name: '×—×–×•×Ÿ ××™×© ×‘× ×™ ×‘×¨×§'},
                {num: '434', name: '×¨×—×•×‘×•×ª'},
                {num: '470', name: '××™×œ×ª'}
            ],
            '31': [ // ×”×‘×™× ×œ××•××™
                {num: '001', name: '×¡× ×™×£ ×¨××©×™ ×ª×œ ××‘×™×‘'},
                {num: '035', name: '×¨××ª ×’×Ÿ'},
                {num: '050', name: '×—×™×¤×”'},
                {num: '070', name: '×™×¨×•×©×œ×™×'},
                {num: '025', name: '× ×ª× ×™×”'},
                {num: '040', name: '×¨××©×•×Ÿ ×œ×¦×™×•×Ÿ'}
            ],
            '14': [ // ××•×¦×¨ ×”×—×™×™×œ
                {num: '101', name: '×¡× ×™×£ ×¨××©×™ ×ª×œ ××‘×™×‘'},
                {num: '120', name: '×—×™×¤×”'},
                {num: '130', name: '×™×¨×•×©×œ×™×'},
                {num: '115', name: '×‘××¨ ×©×‘×¢'},
                {num: '140', name: '× ×ª× ×™×”'}
            ],
            '17': [ // ××¨×›× ×ª×™×œ
                {num: '001', name: '×¡× ×™×£ ×¨××©×™ ×ª×œ ××‘×™×‘'},
                {num: '014', name: '×¨××ª ×’×Ÿ'},
                {num: '031', name: '×—×™×¤×”'},
                {num: '045', name: '×™×¨×•×©×œ×™×'}
            ],
            '04': [ // ×™×”×‘
                {num: '001', name: '×¡× ×™×£ ×¨××©×™ ×™×¨×•×©×œ×™×'},
                {num: '010', name: '×ª×œ ××‘×™×‘'},
                {num: '020', name: '×—×™×¤×”'},
                {num: '030', name: '×‘××¨ ×©×‘×¢'}
            ],
            '09': [ // ×”×“×•××¨
                {num: '001', name: '×¡× ×™×£ ×¨××©×™'},
                {num: '100', name: '×ª×œ ××‘×™×‘ ××¨×›×–'},
                {num: '200', name: '×™×¨×•×©×œ×™×'},
                {num: '300', name: '×—×™×¤×”'}
            ],
            '46': [ // ××¡×“
                {num: '001', name: '×¡× ×™×£ ×¨××©×™ ×ª×œ ××‘×™×‘'},
                {num: '005', name: '×™×¨×•×©×œ×™×'},
                {num: '010', name: '×—×™×¤×”'}
            ],
            '54': [ // ×™×¨×•×©×œ×™×
                {num: '001', name: '×¡× ×™×£ ×¨××©×™ ×™×¨×•×©×œ×™×'},
                {num: '010', name: '×ª×œ ××‘×™×‘'},
                {num: '020', name: '×‘× ×™ ×‘×¨×§'}
            ],
            '26': [ // ×™×•×‘× ×§
                {num: '001', name: '×¡× ×™×£ ×¨××©×™'},
                {num: '010', name: '×ª×œ ××‘×™×‘'}
            ]
        };
        
        // SVG ××˜×‘×¢×•×ª
        const coinSVGs = {
            1: `<svg width="50" height="50" viewBox="0 0 100 100">
                <defs><radialGradient id="c1g" cx="30%" cy="30%"><stop offset="0%" style="stop-color:#f0f0f0"/><stop offset="100%" style="stop-color:#a0a0a0"/></radialGradient></defs>
                <circle cx="50" cy="50" r="46" fill="url(#c1g)" stroke="#707070" stroke-width="4"/>
                <circle cx="50" cy="50" r="38" fill="none" stroke="#888" stroke-width="1"/>
                <text x="50" y="45" text-anchor="middle" font-size="18" font-weight="bold" fill="#404040">â‚ª1</text>
                <text x="50" y="62" text-anchor="middle" font-size="10" fill="#555">×©×§×œ</text>
            </svg>`,
            2: `<svg width="55" height="55" viewBox="0 0 100 100">
                <defs><radialGradient id="c2g" cx="30%" cy="30%"><stop offset="0%" style="stop-color:#e8e8e8"/><stop offset="100%" style="stop-color:#909090"/></radialGradient></defs>
                <circle cx="50" cy="50" r="46" fill="url(#c2g)" stroke="#606060" stroke-width="4"/>
                <circle cx="50" cy="50" r="38" fill="none" stroke="#777" stroke-width="1"/>
                <text x="50" y="45" text-anchor="middle" font-size="18" font-weight="bold" fill="#353535">â‚ª2</text>
                <text x="50" y="62" text-anchor="middle" font-size="9" fill="#454545">×©×§×œ×™×</text>
            </svg>`,
            5: `<svg width="60" height="60" viewBox="0 0 100 100">
                <defs><radialGradient id="c5g" cx="30%" cy="30%"><stop offset="0%" style="stop-color:#e0e0e0"/><stop offset="100%" style="stop-color:#888888"/></radialGradient></defs>
                <circle cx="50" cy="50" r="46" fill="url(#c5g)" stroke="#505050" stroke-width="4"/>
                <circle cx="50" cy="50" r="38" fill="none" stroke="#666" stroke-width="1"/>
                <text x="50" y="45" text-anchor="middle" font-size="18" font-weight="bold" fill="#303030">â‚ª5</text>
                <text x="50" y="62" text-anchor="middle" font-size="9" fill="#404040">×©×§×œ×™×</text>
            </svg>`,
            10: `<svg width="65" height="65" viewBox="0 0 100 100">
                <defs>
                    <radialGradient id="c10o" cx="30%" cy="30%"><stop offset="0%" style="stop-color:#d8d8d8"/><stop offset="100%" style="stop-color:#909090"/></radialGradient>
                    <radialGradient id="c10i" cx="30%" cy="30%"><stop offset="0%" style="stop-color:#ffe070"/><stop offset="100%" style="stop-color:#c09020"/></radialGradient>
                </defs>
                <circle cx="50" cy="50" r="46" fill="url(#c10o)" stroke="#606060" stroke-width="4"/>
                <circle cx="50" cy="50" r="30" fill="url(#c10i)" stroke="#a08020" stroke-width="2"/>
                <text x="50" y="45" text-anchor="middle" font-size="14" font-weight="bold" fill="#5a4010">â‚ª10</text>
                <text x="50" y="58" text-anchor="middle" font-size="8" fill="#6a5020">×©×§×œ×™×</text>
            </svg>`
        };
        
        // SVG ×©×˜×¨×•×ª
        const billSVGs = {
            20: `<svg width="90" height="50" viewBox="0 0 180 100">
                <defs><linearGradient id="b20" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:#e05050"/><stop offset="100%" style="stop-color:#a02020"/></linearGradient></defs>
                <rect x="2" y="2" width="176" height="96" rx="6" fill="url(#b20)" stroke="#801515" stroke-width="3"/>
                <rect x="8" y="8" width="164" height="84" rx="4" fill="none" stroke="rgba(255,255,255,0.3)" stroke-width="1"/>
                <text x="90" y="45" text-anchor="middle" font-size="28" font-weight="bold" fill="#fff">â‚ª20</text>
                <text x="90" y="70" text-anchor="middle" font-size="12" fill="#ffd0d0">×¨×—×œ ×”××©×•×¨×¨×ª</text>
            </svg>`,
            50: `<svg width="90" height="50" viewBox="0 0 180 100">
                <defs><linearGradient id="b50" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:#40a060"/><stop offset="100%" style="stop-color:#206040"/></linearGradient></defs>
                <rect x="2" y="2" width="176" height="96" rx="6" fill="url(#b50)" stroke="#104030" stroke-width="3"/>
                <rect x="8" y="8" width="164" height="84" rx="4" fill="none" stroke="rgba(255,255,255,0.3)" stroke-width="1"/>
                <text x="90" y="45" text-anchor="middle" font-size="28" font-weight="bold" fill="#fff">â‚ª50</text>
                <text x="90" y="70" text-anchor="middle" font-size="11" fill="#c0ffc0">×˜×©×¨× ×™×—×•×‘×¡×§×™</text>
            </svg>`,
            100: `<svg width="90" height="50" viewBox="0 0 180 100">
                <defs><linearGradient id="b100" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:#e09030"/><stop offset="100%" style="stop-color:#a05810"/></linearGradient></defs>
                <rect x="2" y="2" width="176" height="96" rx="6" fill="url(#b100)" stroke="#704010" stroke-width="3"/>
                <rect x="8" y="8" width="164" height="84" rx="4" fill="none" stroke="rgba(255,255,255,0.3)" stroke-width="1"/>
                <text x="90" y="45" text-anchor="middle" font-size="26" font-weight="bold" fill="#fff">â‚ª100</text>
                <text x="90" y="70" text-anchor="middle" font-size="12" fill="#ffe0c0">×œ××” ×’×•×œ×“×‘×¨×’</text>
            </svg>`,
            200: `<svg width="90" height="50" viewBox="0 0 180 100">
                <defs><linearGradient id="b200" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:#4080c0"/><stop offset="100%" style="stop-color:#204580"/></linearGradient></defs>
                <rect x="2" y="2" width="176" height="96" rx="6" fill="url(#b200)" stroke="#102550" stroke-width="3"/>
                <rect x="8" y="8" width="164" height="84" rx="4" fill="none" stroke="rgba(255,255,255,0.3)" stroke-width="1"/>
                <text x="90" y="45" text-anchor="middle" font-size="26" font-weight="bold" fill="#fff">â‚ª200</text>
                <text x="90" y="70" text-anchor="middle" font-size="12" fill="#c0e0ff">× ×ª×Ÿ ××œ×ª×¨××Ÿ</text>
            </svg>`
        };
        
        // ××¦×‘
        let state = {
            wallet: { 1: 0, 2: 0, 5: 0, 10: 0, 20: 0, 50: 0, 100: 0, 200: 0 },
            savings: 0,
            bank: 0,
            bankAccount: null,
            history: [],
            deposits: []
        };
        
        function loadState() {
            const saved = localStorage.getItem('myDigitalWallet');
            if (saved) {
                state = JSON.parse(saved);
            }
            updateDisplay();
        }
        
        function saveState() {
            localStorage.setItem('myDigitalWallet', JSON.stringify(state));
        }
        
        function getWalletBalance() {
            var total = 0;
            for (var denom in state.wallet) {
                total += parseInt(denom) * state.wallet[denom];
            }
            return total;
        }
        
        function formatNumber(num) {
            return num.toLocaleString('he-IL');
        }
        
        function autoSizeBalance(el) {
            var text = el.textContent;
            if (text.length > 10) {
                el.style.fontSize = '14px';
            } else if (text.length > 7) {
                el.style.fontSize = '17px';
            } else if (text.length > 5) {
                el.style.fontSize = '20px';
            } else {
                el.style.fontSize = '24px';
            }
        }
        
        function deposit(amount) {
            state.wallet[amount]++;
            var now = new Date();
            var timeStr = now.toLocaleString('he-IL', { timeZone: 'Asia/Jerusalem', 
                day: '2-digit', 
                month: '2-digit',
                year: 'numeric',
                hour: '2-digit', 
                minute: '2-digit',
                second: '2-digit'
            });
            if (!state.deposits) state.deposits = [];
            state.deposits.push({ amount: amount, time: timeStr });
            addHistory('deposit', amount, '×”×¤×§×“×ª â‚ª' + amount);
            saveState();
            updateDisplay();
            
            document.getElementById('walletBalance').classList.add('depositing');
            setTimeout(function() { document.getElementById('walletBalance').classList.remove('depositing'); }, 300);
        }
        
        function updateDisplay() {
            document.getElementById('walletBalance').textContent = 'â‚ª' + formatNumber(getWalletBalance());
            document.getElementById('savingsBalance').textContent = 'â‚ª' + formatNumber(state.savings);
            document.getElementById('bankBalance').textContent = 'â‚ª' + formatNumber(state.bank);
            
            autoSizeBalance(document.getElementById('walletBalance'));
            autoSizeBalance(document.getElementById('savingsBalance'));
            autoSizeBalance(document.getElementById('bankBalance'));
            
            // ×¢×“×›×•×Ÿ ×ª×•×›×Ÿ ×”××¨× ×§ - ×ª×¦×•×’×” ××§×•×‘×¦×ª
            var contentsEl = document.getElementById('walletContents');
            var html = '';
            
            var denominations = [1, 2, 5, 10, 20, 50, 100, 200];
            
            for (var i = 0; i < denominations.length; i++) {
                var denom = denominations[i];
                if (state.wallet[denom] > 0) {
                    var svg = denom <= 10 ? coinSVGs[denom] : billSVGs[denom];
                    html += '<div class="money-item">' +
                        svg +
                        '<span class="money-count">x' + state.wallet[denom] + '</span>' +
                    '</div>';
                }
            }
            
            if (html === '') {
                html = '<div class="empty-wallet">×”××¨× ×§ ×¨×™×§ ğŸ™</div>';
            }
            
            contentsEl.innerHTML = html;
            updateHistory();
        }
        
        function addHistory(type, amount, text) {
            const now = new Date();
            const timeStr = now.toLocaleString('he-IL', { timeZone: 'Asia/Jerusalem', 
                day: '2-digit', 
                month: '2-digit',
                hour: '2-digit', 
                minute: '2-digit' 
            });
            state.history.unshift({ type, amount, text, time: timeStr });
            if (state.history.length > 30) state.history.pop();
        }
        
        function updateHistory() {
            const historyEl = document.getElementById('history');
            
            if (state.history.length === 0) {
                historyEl.innerHTML = '<div class="no-history">××™×Ÿ ×¢×“×™×™×Ÿ ×¤×¢×•×œ×•×ª</div>';
                return;
            }
            
            let html = '';
            state.history.forEach(item => {
                let className = 'history-deposit';
                if (item.type === 'withdraw' || item.type === 'bank') className = 'history-bank';
                if (item.type === 'savings') className = 'history-savings';
                
                html += `<div class="history-item ${className}">
                    <div>
                        <div class="history-text">${item.text}</div>
                        <div class="history-time">${item.time}</div>
                    </div>
                    <span class="history-amount">â‚ª${item.amount}</span>
                </div>`;
            });
            
            historyEl.innerHTML = html;
        }
        
        function updateBranches() {
            const bankCode = document.getElementById('bankSelect').value;
            const branchSelect = document.getElementById('branchSelect');
            
            branchSelect.innerHTML = '<option value="">-- ×‘×—×¨×™ ×¡× ×™×£ --</option>';
            
            if (bankCode && branchesData[bankCode]) {
                branchesData[bankCode].forEach(branch => {
                    const option = document.createElement('option');
                    option.value = branch.num;
                    option.textContent = `${branch.num} - ${branch.name}`;
                    branchSelect.appendChild(option);
                });
            }
        }
        
        function openBankModal() {
            document.getElementById('bankModal').style.display = 'flex';
            document.getElementById('bankFormSection').style.display = 'block';
            document.getElementById('bankSuccessSection').style.display = 'none';
            document.getElementById('bankError').textContent = '';
            document.getElementById('bankAmount').value = '';
        }
        
        function closeBankModal() {
            document.getElementById('bankModal').style.display = 'none';
        }
        
        function confirmBankTransfer() {
            const amount = parseInt(document.getElementById('bankAmount').value);
            const bankSelect = document.getElementById('bankSelect');
            const branchSelect = document.getElementById('branchSelect');
            const accountNumber = document.getElementById('accountNumber').value;
            const accountName = document.getElementById('accountName').value;
            
            const balance = getWalletBalance();
            
            if (!amount || amount <= 0) {
                document.getElementById('bankError').textContent = '× × ×œ×”×–×™×Ÿ ×¡×›×•× ×ª×§×™×Ÿ';
                return;
            }
            if (amount > balance) {
                document.getElementById('bankError').textContent = '××™×Ÿ ××¡×¤×™×§ ×›×¡×£ ×‘××¨× ×§!';
                return;
            }
            if (!bankSelect.value) {
                document.getElementById('bankError').textContent = '× × ×œ×‘×—×•×¨ ×‘× ×§';
                return;
            }
            if (!branchSelect.value) {
                document.getElementById('bankError').textContent = '× × ×œ×‘×—×•×¨ ×¡× ×™×£';
                return;
            }
            if (!accountNumber || accountNumber.length < 4) {
                document.getElementById('bankError').textContent = '× × ×œ×”×–×™×Ÿ ××¡×¤×¨ ×—×©×‘×•×Ÿ ×ª×§×™×Ÿ';
                return;
            }
            if (!accountName) {
                document.getElementById('bankError').textContent = '× × ×œ×”×–×™×Ÿ ×©× ×‘×¢×œ/×ª ×”×—×©×‘×•×Ÿ';
                return;
            }
            
            // ×‘×™×¦×•×¢ ×”×”×¢×‘×¨×”
            let remaining = amount;
            const denominations = [200, 100, 50, 20, 10, 5, 2, 1];
            
            for (let denom of denominations) {
                while (remaining >= denom && state.wallet[denom] > 0) {
                    state.wallet[denom]--;
                    remaining -= denom;
                }
            }
            
            state.bank += amount;
            state.bankAccount = {
                bankName: bankSelect.options[bankSelect.selectedIndex].text,
                bankCode: bankSelect.value,
                branch: branchSelect.value,
                branchName: branchSelect.options[branchSelect.selectedIndex].text,
                account: accountNumber,
                name: accountName
            };
            
            addHistory('bank', amount, `×”×¢×‘×¨×” ×œ×‘× ×§ - ${state.bankAccount.bankName.split(' (')[0]}`);
            saveState();
            updateDisplay();
            
            // ×”×¦×’×ª ×”×¦×œ×—×”
            var now = new Date();
            var dateStr = now.toLocaleString('he-IL', { timeZone: 'Asia/Jerusalem', 
                day: '2-digit', 
                month: '2-digit',
                year: 'numeric',
                hour: '2-digit', 
                minute: '2-digit',
                second: '2-digit'
            });
            document.getElementById('bankFormSection').style.display = 'none';
            document.getElementById('bankSuccessSection').style.display = 'block';
            document.getElementById('transferDetails').innerHTML = 
                '<p><strong>×ª××¨×™×š ×•×©×¢×”:</strong> ' + dateStr + '</p>' +
                '<p><strong>×¡×›×•×:</strong> â‚ª' + amount + '</p>' +
                '<p><strong>×‘× ×§:</strong> ' + state.bankAccount.bankName + '</p>' +
                '<p><strong>×¡× ×™×£:</strong> ' + state.bankAccount.branchName + '</p>' +
                '<p><strong>××¡×¤×¨ ×—×©×‘×•×Ÿ:</strong> ' + accountNumber + '</p>' +
                '<p><strong>×©×:</strong> ' + accountName + '</p>' +
                '<p style="margin-top:10px; color: var(--gold); font-weight:bold;">âœ… ×”×”×¢×‘×¨×” ×‘×•×¦×¢×” ×‘×”×¦×œ×—×”</p>';
        }
        
        function openSavingsModal() {
            document.getElementById('savingsModal').style.display = 'flex';
            document.getElementById('savingsError').textContent = '';
            document.getElementById('savingsAmount').value = '';
        }
        
        function closeSavingsModal() {
            document.getElementById('savingsModal').style.display = 'none';
        }
        
        function confirmSavings() {
            var amount = parseInt(document.getElementById('savingsAmount').value);
            
            if (!amount || amount <= 0) {
                document.getElementById('savingsError').textContent = '× × ×œ×”×–×™×Ÿ ×¡×›×•× ×ª×§×™×Ÿ';
                return;
            }
            if (amount > state.bank) {
                document.getElementById('savingsError').textContent = '××™×Ÿ ××¡×¤×™×§ ×›×¡×£ ×‘×—×©×‘×•×Ÿ ×”×‘× ×§!';
                return;
            }
            
            state.bank -= amount;
            state.savings += amount;
            addHistory('savings', amount, '×”×¢×‘×¨×” ××”×‘× ×§ ×œ×—×™×¡×›×•×Ÿ ğŸ·');
            saveState();
            updateDisplay();
            
            var now = new Date();
            var dateStr = now.toLocaleString('he-IL', { timeZone: 'Asia/Jerusalem', 
                day: '2-digit', 
                month: '2-digit',
                year: 'numeric',
                hour: '2-digit', 
                minute: '2-digit',
                second: '2-digit'
            });
            alert('âœ… ×”×•×¢×‘×¨ ×œ×—×™×¡×›×•×Ÿ ×‘×”×¦×œ×—×”!\n\n×¡×›×•×: â‚ª' + amount + '\n×ª××¨×™×š: ' + dateStr);
            closeSavingsModal();
        }
        
        // ×¡×’×™×¨×ª ××•×“××œ ×‘×œ×—×™×¦×” ×‘×—×•×¥
        document.getElementById('bankModal').addEventListener('click', function(e) {
            if (e.target === this) closeBankModal();
        });
        document.getElementById('savingsModal').addEventListener('click', function(e) {
            if (e.target === this) closeSavingsModal();
        });
        
        // ×˜×¢×™× ×”
        // ×”×¦×’×ª ×ª××¨×™×š × ×•×›×—×™
        function updateCurrentDate() {
            var now = new Date();
            var dateStr = now.toLocaleDateString('he-IL', { 
                timeZone: 'Asia/Jerusalem',
                weekday: 'long',
                day: 'numeric', 
                month: 'long',
                year: 'numeric'
            });
            document.getElementById('currentDate').textContent = dateStr;
        }
        
        updateCurrentDate();
        loadState();
    </script>
</body>
</html>
